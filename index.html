<html>
<head>
<title>cssJS3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="HandheldFriendly" content="true">

  <meta charset="UTF-8">

  <script src="https://production-assets.codepen.io/assets/common/cookie_used_reload-ad47fd0c6e26ac84e84e95272cddc82a26caa7342cea5c006434d4bbb69d7b44.js"></script>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@github">
  <meta name="twitter:title" content="cssJs3D Visor">
  <meta name="twitter:description" content="cssJs3D Visor">
  <meta name="twitter:creator" content="@oliver_ap">

  <meta property="og:title" content="cssJs3D">
  <meta property="og:url" content="https://github.com/boxgames1/cssjs3D">
  <meta property="og:site_name" content="GitHub">
  <meta property="og:description" content="cssJS3D Visor">

  <link rel="alternate" type="application/json+oembed" href="https://codepen.io/api/oembed?url=http://codepen.io/ge1doot/pen/GgOYoy&amp;format=json" title="apparently transparent">

  <link href="//fonts.googleapis.com/css?family=Lato:400,900,400italic,700italic" rel="stylesheet">

  <link rel="stylesheet" media="all" href="https://production-assets.codepen.io/assets/global/global-NoMQ-6e3654b1b9c4db8147db6a7789162e7cc45068b2ae9e816bb11774c06a07eaae.css">
  <link rel="stylesheet" media="all" href="https://production-assets.codepen.io/assets/editor/editor-c454d238c2adad29db912070936f8f55783d587146126fa3439c7ffe3319fd15.css">

  
  <meta name="description" content="cssJS3D Visor">

  


<link rel="stylesheet" media="screen" href="https://production-assets.codepen.io/assets/editor/themes/twilight-913694f984ee6a61665648153e2c73cc43af641fe5b14faca0bb1a6febfa9358.css" id="cm-theme">

<style id="cm-font-family" class="cm-font-family">
  
  .CodeMirror,
  .console-logs .console-line,
  .console-command-line-input,
  .console-message,
  .CodeMirror-hint {
    font-family: Monaco, MonoSpace;
  }
</style>

<style id="cm-font-size">
  .CodeMirror,
  .console-logs .console-line,
  .console-command-line-input,
  .console-message,
  .CodeMirror-hint {
    font-size: 14px;
  }
</style>
<script>

var ge1doot = ge1doot || {
	/*
	         \|||/
	         (o o)
	+~~~~ooO~~(_)~~~~~~~~+
	| Please             |
	| don't feed the     |
	| TROLLS !           |
	+~~~~~~~~~~~~~~Ooo~~~+
	        |__|__|
	         || ||
	        ooO Ooo
	*/
	
	screen: {
		elem:     null,
		callback: null,
		ctx:      null,
		width:    0,
		height:   0,
		left:     0,
		top:      0,
		init: function (id, callback, initRes) {
			this.elem = document.getElementById(id);
			this.callback = callback || null;
			if (this.elem.tagName == "CANVAS") this.ctx = this.elem.getContext("2d");
			window.addEventListener('resize', function () {
				this.resize();
			}.bind(this), false);
			this.elem.onselectstart = function () { return false; }
			this.elem.ondrag        = function () { return false; }
			initRes && this.resize();
			return this;
		},
		resize: function () {
			var o = this.elem;
			this.width  = o.offsetWidth;
			this.height = o.offsetHeight;
			for (this.left = 0, this.top = 0; o != null; o = o.offsetParent) {
				this.left += o.offsetLeft;
				this.top  += o.offsetTop;
			}
			if (this.ctx) {
				this.elem.width  = this.width;
				this.elem.height = this.height;
			}
			this.callback && this.callback();
		},
		pointer: {
			screen:   null,
			elem:     null,
			callback: null,
			pos:   {x:0, y:0},
			mov:   {x:0, y:0},
			drag:  {x:0, y:0},
			start: {x:0, y:0},
			end:   {x:0, y:0},
			active: false,
			touch: false,
			down: function (e, touch) {
				this.touch = touch;
				if (touch) e.preventDefault();
				var pointer = touch ? e.touches[0] : e;
				this.pos.x = this.start.x = pointer.clientX - this.screen.left;
				this.pos.y = this.start.y = pointer.clientY - this.screen.top;
				this.active = true;
				this.callback.down && this.callback.down();
			},
			up: function (e, touch) {
				this.touch = touch;
				e.preventDefault();
				this.end.x = this.drag.x;
				this.end.y = this.drag.y;
				this.active = false;
				this.callback.up && this.callback.up();
			},
			move: function (e, touch) {
				this.touch = touch;
				e.preventDefault();
				var pointer = touch ? e.touches[0] : e;
				this.mov.x = pointer.clientX - this.screen.left;
				this.mov.y = pointer.clientY - this.screen.top;
				if (this.active) {
					this.pos.x = this.mov.x;
					this.pos.y = this.mov.y;
					this.drag.x = this.end.x - (this.pos.x - this.start.x);
					this.drag.y = this.end.y - (this.pos.y - this.start.y);
					this.callback.move && this.callback.move();
				}
			},
			init: function (callback) {
				this.screen = ge1doot.screen;
				this.elem = this.screen.elem;
				this.callback = callback || {};
				if ('ontouchstart' in window) {
					// touch
					this.elem.ontouchstart  = function (e) { this.down(e, true); }.bind(this);
					this.elem.ontouchmove   = function (e) { this.move(e, true); }.bind(this);
					this.elem.ontouchend    = function (e) { this.up(e, true);   }.bind(this);
					this.elem.ontouchcancel = function (e) { this.up(e, true);   }.bind(this);
				}
				// mouse
				this.elem.addEventListener("mousedown", function (e) { this.down(e, false); }.bind(this), true);
				document.addEventListener("mousemove", function (e) { this.move(e, false); }.bind(this), true);
				document.addEventListener("mouseup",   function (e) { this.up  (e, false); }.bind(this), true);
				return this;
			}
		}
	}
}

</script>
<style>
html {
  touch-action: none;
  content-zooming: none;
}

body {
  position: absolute;
  margin: 0;
  padding: 0;
  background: #333;
  width: 100%;
  height: 100%;
}

#screen {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  cursor: pointer;
  background: #000;
  user-select: none;
  overflow: hidden;
}

#scene {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  transform: translateZ(1000px);
  -webkit-transform: translateZ(1000px);
}

#scene img {
  position: absolute;
  visibility: hidden;
  margin: -300px -500px;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

#scene .f {
  margin: -500px -500px;
}

#scene .s {
  width: 252px;
  height: 600px;
  margin: -300px -126px;
}
</style>
</head>
<body>
<div id="screen">
  <div id="scene">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateZ(-1500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateZ(-1000px) rotateY(-90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateZ(-1000px) rotateY(90deg) translateZ(-500px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/kader-mur-bois-lumiere-big.jpg" data-transform="translateZ(-1000px) rotateX(90deg) translateZ(-300px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/subtlegrunge5.jpg" data-transform="translateZ(-1000px) rotateX(-90deg) translateZ(-300px)">

    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateX(-1000px) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateX(-1000px) rotateY(90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="translateX(-1000px) rotateY(180deg) translateZ(-500px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/kader-mur-bois-lumiere-big.jpg" data-transform="translateX(-1000px) rotateX(90deg) translateZ(-300px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/subtlegrunge5.jpg" data-transform="translateX(-1000px) rotateX(-90deg) translateZ(-300px)">

    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateZ(-1500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateZ(-1000px) rotateY(-90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateZ(-1000px) rotateY(90deg) translateZ(-500px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/kader-mur-bois-lumiere-big.jpg" data-transform="rotateY(180deg) translateZ(-1000px) rotateX(90deg) translateZ(-300px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/subtlegrunge5.jpg" data-transform="rotateY(180deg) translateZ(-1000px) rotateX(-90deg) translateZ(-300px)">

    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateX(-1000px) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateX(-1000px) rotateY(90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.jpg" data-transform="rotateY(180deg) translateX(-1000px) rotateY(180deg) translateZ(-500px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/kader-mur-bois-lumiere-big.jpg" data-transform="rotateY(180deg) translateX(-1000px) rotateX(90deg) translateZ(-300px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/subtlegrunge5.jpg" data-transform="rotateY(180deg) translateX(-1000px) rotateX(-90deg) translateZ(-300px)">

    <img class="s" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/psd3.png" data-transform="translateZ(-1000px)">
    <img class="s" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/psd3.png" data-transform="rotateY(180deg) translateZ(-1000px)">
    <img class="s" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/psd3.png" data-transform="rotateY(90deg) translateZ(-1000px)">
    <img class="s" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/psd3.png" data-transform="rotateY(-90deg) translateZ(-1000px)">

    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.png" data-transform="translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.png" data-transform="rotateY(-90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.png" data-transform="rotateY(90deg) translateZ(-500px)">
    <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/002_3000x2844n.png" data-transform="rotateY(180deg) translateZ(-500px)">

    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/kader-mur-bois-lumiere.jpg" data-transform="rotateX(90deg) translateZ(-300px)">
    <img class="f" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/222599/subtlegrunge5.jpg" data-transform="rotateX(-90deg) translateZ(-300px)">
  </div>
</div>
<script>
! function() {
  // ==== on load ====
  window.addEventListener('load', function() {
    "use strict";
    var faces, localTransform = [];
    // ==== init script ====
    var screen = ge1doot.screen.init("screen", null, true);
    var pointer = screen.pointer.init({
      move: function() {
        if (pointer.drag.y > 270) pointer.drag.y = 270;
        if (pointer.drag.y < -270) pointer.drag.y = -270;
      }
    });
    faces = document.getElementById("scene").getElementsByTagName("img");
    // ==== Easing ====
    function Ease(speed, val) {
      this.speed = speed;
      this.target = val;
      this.value = val;
    }
    Ease.prototype.ease = function(target) {
      this.value += (target - this.value) * this.speed;
    }
    // ==== camera ====
    var camera = {
      angle: {
        x: 0,
        y: 0,
        ease: {
          x: 0,
          y: 0
        }
      },
      pos: {
        x: 0,
        z: 0
      },
      vel: {
        x: 0.1,
        z: 0.1
      },
      fov: new Ease(0.01, 300),
      move: function() {
        this.angle.y = -(this.angle.ease.y += (pointer.drag.x - this.angle.ease.y) * 0.06) / 3;
        this.angle.x = (this.angle.ease.x += (pointer.drag.y - this.angle.ease.x) * 0.06) / 3;
        this.fov.ease(pointer.active ? 300 : 500);
        var a = this.angle.y * Math.PI / 180;
        var x = -Math.sin(a) * this.vel.x;
        var z = Math.cos(a) * this.vel.z;
        this.pos.x += x;
        this.pos.z += z;
        if (pointer.active) {
          if ((this.pos.x > 190 && x > 0) || (this.pos.x < -190 && x < 0)) this.vel.x *= 0.9;
          else {
            if (this.vel.x < 0.1) this.vel.x = 1;
            if (this.vel.x < 5) this.vel.x *= 1.1;
          }
          if ((this.pos.z > 190 && z > 0) || (this.pos.z < -190 && z < 0)) this.vel.z *= 0.9;
          else {
            if (this.vel.z < 0.1) this.vel.z = 1;
            if (this.vel.z < 5) this.vel.z *= 1.1;
          }
        } else {
          this.vel.x *= 0.9;
          this.vel.z *= 0.9;
        }
        a = Math.cos(this.angle.x * Math.PI / 180);
        var mx = -(1 * Math.cos((this.angle.y - 90) * Math.PI / 180) * a) * (500 - this.fov.value * 0.5);
        var mz = -(1 * Math.sin((this.angle.y - 90) * Math.PI / 180) * a) * (500 - this.fov.value * 0.5);
        var my = Math.sin(this.angle.x * Math.PI / 180) * 200;
        return "perspective(" + this.fov.value + "px) rotateX(" + this.angle.x + "deg) " + "rotateY(" + this.angle.y + "deg) translateX(" + (this.pos.x + mx) + "px) translateY(" + my + "px) translateZ(" + (this.pos.z + mz) + "px)";
      }
    }
    // ==== init faces ====
    for (var i = 0, n = faces.length; i < n; i++) {
      var elem = faces[i];
      var s = elem.getAttribute("data-transform");
      elem.style.transform = s;
      elem.style.webkitTransform = s;
      elem.style.visibility = "visible";
      localTransform.push(s);
    }
    // ==== main loop ====
    function run() {
      requestAnimationFrame(run);
      var globalcamera = camera.move();
      // ==== anim faces ====
      for (var i = 0, elem; elem = faces[i]; i++) {
        var s = globalcamera + localTransform[i];
        elem.style.transform = s;
        elem.style.webkitTransform = s;
      }
    }
    // ==== start animation ====
    requestAnimationFrame(run);
  }, false);
}();
</script>
</body>
</html>
